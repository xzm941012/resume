!function(a){"use strict";function b(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function c(a){return"string"!=typeof a&&(a=String(a)),a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return r.iterable&&(b[Symbol.iterator]=function(){return b}),b}function e(a){this.map={},a instanceof e?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function g(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function h(a){var b=new FileReader,c=g(b);return b.readAsArrayBuffer(a),c}function i(a){var b=new FileReader,c=g(b);return b.readAsText(a),c}function j(a){for(var b=new Uint8Array(a),c=new Array(b.length),d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);return c.join("")}function k(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);return b.set(new Uint8Array(a)),b.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,a)if("string"==typeof a)this._bodyText=a;else if(r.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(r.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(r.arrayBuffer&&r.blob&&t(a))this._bodyArrayBuffer=k(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a)&&!u(a))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=k(a)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return i(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(o)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(a){var b=a.toUpperCase();return v.indexOf(b)>-1?b:a}function n(a,b){b=b||{};var c=b.body;if("string"==typeof a)this.url=a;else{if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new e(a.headers)),this.method=a.method,this.mode=a.mode,c||null==a._bodyInit||(c=a._bodyInit,a.bodyUsed=!0)}if(this.credentials=b.credentials||this.credentials||"omit",(b.headers||!this.headers)&&(this.headers=new e(b.headers)),this.method=m(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function o(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function p(a){var b=new e;return a.split(/\r?\n/).forEach(function(a){var c=a.split(":"),d=c.shift().trim();if(d){var e=c.join(":").trim();b.append(d,e)}}),b}function q(a,b){b||(b={}),this.type="default",this.status="status"in b?b.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in b?b.statusText:"OK",this.headers=new e(b.headers),this.url=b.url||"",this._initBody(a)}if(!a.fetch){var r={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};if(r.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=function(a){return a&&DataView.prototype.isPrototypeOf(a)},u=ArrayBuffer.isView||function(a){return a&&s.indexOf(Object.prototype.toString.call(a))>-1};e.prototype.append=function(a,d){a=b(a),d=c(d);var e=this.map[a];this.map[a]=e?e+","+d:d},e.prototype["delete"]=function(a){delete this.map[b(a)]},e.prototype.get=function(a){return a=b(a),this.has(a)?this.map[a]:null},e.prototype.has=function(a){return this.map.hasOwnProperty(b(a))},e.prototype.set=function(a,d){this.map[b(a)]=c(d)},e.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)},e.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),d(a)},e.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),d(a)},e.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),d(a)},r.iterable&&(e.prototype[Symbol.iterator]=e.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];n.prototype.clone=function(){return new n(this,{body:this._bodyInit})},l.call(n.prototype),l.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new e(this.headers),url:this.url})},q.error=function(){var a=new q(null,{status:0,statusText:""});return a.type="error",a};var w=[301,302,303,307,308];q.redirect=function(a,b){if(-1===w.indexOf(b))throw new RangeError("Invalid status code");return new q(null,{status:b,headers:{location:a}})},a.Headers=e,a.Request=n,a.Response=q,a.fetch=function(a,b){return new Promise(function(c,d){var e=new n(a,b),f=new XMLHttpRequest;f.onload=function(){var a={status:f.status,statusText:f.statusText,headers:p(f.getAllResponseHeaders()||"")};a.url="responseURL"in f?f.responseURL:a.headers.get("X-Request-URL");var b="response"in f?f.response:f.responseText;c(new q(b,a))},f.onerror=function(){d(new TypeError("Network request failed"))},f.ontimeout=function(){d(new TypeError("Network request failed"))},f.open(e.method,e.url,!0),"include"===e.credentials&&(f.withCredentials=!0),"responseType"in f&&r.blob&&(f.responseType="blob"),e.headers.forEach(function(a,b){f.setRequestHeader(b,a)}),f.send("undefined"==typeof e._bodyInit?null:e._bodyInit)})},a.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),window.DBSDK={API:{app_id:"",scheme:"https",host:"www.designbold.com",path:"design-it/create"}},DBSDK.getParameterByName=function(a,b){b||(b=document.getElementById("db-js-sdk").getAttribute("src")),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[#&]"+a+"(=([^&]*)|&|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},1==DBSDK.getParameterByName("debug")&&(DBSDK.API.host="beta.designbold.com"),DBSDK.API_CREATE=DBSDK.API.scheme+"://"+DBSDK.API.host+"/"+DBSDK.API.path,DBSDK.validateApp=function(a){var b=DBSDK.getParameterByName("app_id");return b&&""!=b&&window.fetch("https://api.designbold.com/pub/app/validate/"+b,{method:"POST",mode:"cors",redirect:"follow",headers:new Headers({"Content-Type":"application/json"})}).then(function(c){200==c.status&&"function"==typeof a&&(DBSDK.API.app_id=b,a())})["catch"](function(){}),!1},DBSDK.$=function(a){var b="querySelectorAll";return 0===a.indexOf("#")&&(b="getElementById",a=a.substr(1,a.length)),document[b](a)},DBSDK.isElementInViewport=function(a){"function"==typeof jQuery&&a instanceof jQuery&&(a=a[0]);var b=a.getBoundingClientRect();return b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)},DBSDK.bindEventHandler=function(a,b,c,d){d=d||!1,a.addEventListener?a.addEventListener(b,c,d):a.attachEvent("on"+b,c)},DBSDK.unbindEventHandler=function(a,b,c,d){d=d||!1,a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent("on"+b,c)},DBSDK.documentReady=function(a){"loading"!=document.readyState?a():window.addEventListener?window.addEventListener("DOMContentLoaded",a):window.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&a()})},DBSDK.FX={easing:{linear:function(a){return a},quadratic:function(a){return Math.pow(a,2)},swing:function(a){return.5-Math.cos(a*Math.PI)/2},circ:function(a){return 1-Math.sin(Math.acos(a))},back:function(a,b){return Math.pow(a,2)*((b+1)*a-b)},bounce:function(a){for(var b=0,c=1;1;b+=c,c/=2)if(a>=(7-4*b)/11)return-Math.pow((11-6*b-11*a)/4,2)+Math.pow(c,2)},elastic:function(a,b){return Math.pow(2,10*(a-1))*Math.cos(20*Math.PI*b/3*a)}},animate:function(a){a=a||{};var b=new Date,c=setInterval(function(){var d=new Date-b,e=d/a.duration;e>1&&(e=1),a.progress=e;var f=a.delta(e);a.step(f),1==e&&(clearInterval(c),a.complete())},a.delay||10)},fadeOut:function(a,b){b=b||{};var c=1;this.animate({duration:b.duration||400,delta:function(a){return a=this.progress,DBSDK.FX.easing.swing(a)},complete:b.complete||function(){},step:function(b){a.style.opacity=c-b}})},fadeIn:function(a,b){b=b||{};var c=0;this.animate({duration:b.duration||400,delta:function(a){return a=this.progress,DBSDK.FX.easing.swing(a)},complete:b.complete||function(){},step:function(b){a.style.opacity=c+b}})}},DBSDK.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},DBSDK.startDesignTool=function(a,b){var c=a.currentTarget.getAttribute("data-href"),d=a.currentTarget.getAttribute("data-id"),e=DBSDK.$('.db-overlay[data-id="'+d+'"]');if(e.length)e[0].style.display="block";else{var f=document.createElement("iframe");if(f.style.display="none",f.setAttribute("data-id",d),"object"==typeof b)for(var g in b)b.hasOwnProperty(g)&&f.setAttribute("data-custom-"+g,b[g]);f.width="100%",f.height="100%",f.src=c,f.name="db-design-frame-"+d;var h=function(){f.removeEventListener?f.removeEventListener("load",null,!0):f.detachEvent&&f.detachEvent("onload",null),f.style.display="block",DBSDK.$('.db-overlay[data-id="'+d+'"] .db-loading')[0].style.display="none"};DBSDK.unbindEventHandler(f,"load",h,!0),DBSDK.bindEventHandler(f,"load",h,!0);var e='<div class="db-overlay animated fadeIn" data-id="'+d+'" style="display: block;"><span class="db-close-lightbox">×</span><div class="db-lightbox"><div class="db-loading"><div class="inner-circles-loader large loading-icon"></div></div></div></div>';document.body.insertAdjacentHTML("beforeend",e),DBSDK.$('.db-overlay[data-id="'+d+'"] .db-lightbox')[0].appendChild(f),DBSDK.bindEventHandler(DBSDK.$('.db-overlay[data-id="'+d+'"] .db-close-lightbox')[0],"click",function(a){a.currentTarget.parentNode.style.display="none"})}},DBSDK.buildButtonUri=function(a,b,c,d,e,f){a=a||"",b=b||"",c=c||"",d=d||0,e=e||0,f=f||"px";var g=DBSDK.API.app_id;if(""!=a)return DBSDK.API_CREATE+"/image/w"+d+"/h"+e+"/"+window.btoa(a)+(""!=g?"?app_id="+DBSDK.API.app_id:"");if(""!=b||""!=c){var h=DBSDK.API_CREATE;return h+=""!=b?"/"+b:"/dt",""!=c&&(h+="/"+c),h+(""!=g?"?app_id="+DBSDK.API.app_id:"")}return DBSDK.API_CREATE+"/custom/"+d+"/"+e+"/"+f+(""!=g?"?app_id="+DBSDK.API.app_id:"")},DBSDK.startSDK=function(a){function b(a){DBSDK.startDesignTool(a,c?r:[])}a=a||{};var c=!1;if("undefined"!=typeof a.post_param&&"undefined"!=typeof a.post_param.custom){var d=a.post_param.custom;"[object Array]"===Object.prototype.toString.call(d)&&(c=!0)}var e=DBSDK.$("img.db-img-design-me");if(e.length)for(var f=function(b,e){function f(a){DBSDK.startDesignTool(a,c?t:[])}var e="undefined"!=typeof e?e:this;if(""==e.getAttribute("data-id")||!DBSDK.$('.db-frame-designit[data-id="'+e.getAttribute("data-id")+'"]').length){var g=document.createElement("div"),h=e.src,i=e.naturalWidth||e.clientWidth,j=e.naturalHeight||e.clientHeight,k=e.getAttribute("data-db-title")||"Design It",l=e.getAttribute("data-db-doctype")||"",m=e.getAttribute("data-db-layout")||"",n=e.getAttribute("data-db-width")||i,o=e.getAttribute("data-db-height")||j,p=e.getAttribute("data-db-unit")||"px",q=e.getAttribute("data-db-image")||!0,r=DBSDK.guid();"undefined"!=typeof a.image_edit&&null!=a.image_edit&&(q=a.image_edit?!0:!1),g.className="db-frame-designit",g.setAttribute("data-id",r),e.setAttribute("data-db-uid",r),e.parentNode.insertBefore(g,e),g.appendChild(e);var s=document.createElement("a");if(s.className="db-btn-designit",s.href="javascript:;",s.innerHTML=k,s.setAttribute("data-id",r),c)for(var t={},u=0;u<d.length;u++)e.hasAttribute("data-"+d[u])&&(t[d[u]]=e.getAttribute("data-"+d[u]),s.setAttribute("data-custom-"+d[u],t[d[u]]));DBSDK.unbindEventHandler(s,"click",f),DBSDK.bindEventHandler(s,"click",f),q===!1||"false"==q?s.setAttribute("data-href",DBSDK.buildButtonUri(null,l,m,n,o,p)):s.setAttribute("data-href",DBSDK.buildButtonUri(h,null,null,i,j,null));var v=document.createElement("div");v.className="db-designit-wrap",v.appendChild(s),g.appendChild(v)}},g=0;g<e.length;g++)e[g].complete?f(null,e[g]):e[g].onload=f;var h=DBSDK.$("div.db-btn-design-me");if(h.length)for(var g=0;g<h.length;g++){var i=h[g],j=i.getAttribute("data-db-doctype")||"",k=i.getAttribute("data-db-layout")||"",l=i.getAttribute("data-db-title")||"Design It",m=i.getAttribute("data-db-width")||0,n=i.getAttribute("data-db-height")||0,o=i.getAttribute("data-db-unit")||"px",p=DBSDK.guid(),q=document.createElement("a");if(q.className="db-btn-designit",q.href="javascript:;",q.innerHTML=l,q.setAttribute("data-id",p),c)for(var r={},s=0;s<d.length;s++)i.hasAttribute("data-"+d[s])&&(r[d[s]]=i.getAttribute("data-"+d[s]),q.setAttribute("data-custom-"+d[s],r[d[s]]));DBSDK.unbindEventHandler(q,"click",b),DBSDK.bindEventHandler(q,"click",b),q.setAttribute("data-href",DBSDK.buildButtonUri(null,j,k,m,n,o)),i.parentNode.replaceChild(q,i)}var t=function(b){var c=b.data.action||"",d=b.data.frame||"";if("#db#design-button#preview"==c){var e=b.data.src||"",f=document.getElementsByName(d);if(f.length){var g=f[0].getAttribute("data-id"),h=DBSDK.$('img[data-db-uid="'+g+'"]')[0],i=document.createElement("div");if(i.className="db-load",i.innerHTML='<div class="db-load-img"><div class="inner-circles-loader  loading-icon"></div></div>',0==DBSDK.$('.db-frame-designit[data-id="'+g+'"]').length)return!1;DBSDK.$('.db-frame-designit[data-id="'+g+'"]')[0].appendChild(i),h.style.cursor="wait",h.setAttribute("data-osrc",h.src),h.hasAttribute("srcset")&&(h.setAttribute("data-osrcset",h.getAttribute("srcset")),h.removeAttribute("srcset")),h.onload=function(){DBSDK.$('.db-frame-designit[data-id="'+g+'"]')[0].removeChild(i),h.style.removeProperty?h.style.removeProperty("cursor"):h.style.removeAttribute("cursor")},h.src=e,window.scrollTo(0,h.offsetTop-50)||h.scrollIntoView(!0),DBSDK.$('.db-frame-designit[data-id="'+g+'"] .db-designit-wrap .db-btn-designit')[0].style.display="none";var j=document.createElement("a");j.href="javascript:;",j.className="db-btn-redesign",j.innerHTML="Re-Design";var k=function(a){a.preventDefault(),DBSDK.$('.db-overlay[data-id="'+g+'"]')[0].style.display="block",h.src=h.getAttribute("data-osrc"),h.removeAttribute("data-osrc"),h.hasAttribute("data-osrcset")&&(h.setAttribute("srcset",h.getAttribute("data-osrcset")),h.removeAttribute("data-osrcset")),DBSDK.$('.db-frame-designit[data-id="'+g+'"] .db-designit-wrap')[0].removeChild(j),DBSDK.$('.db-frame-designit[data-id="'+g+'"] .db-designit-wrap')[0].removeChild(l),DBSDK.$('.db-frame-designit[data-id="'+g+'"] .db-designit-wrap .db-btn-designit')[0].style.display="block"};DBSDK.unbindEventHandler(j,"click",k),DBSDK.bindEventHandler(j,"click",k),DBSDK.$('.db-frame-designit[data-id="'+g+'"] .db-designit-wrap')[0].appendChild(j);var l=document.createElement("a");l.href="javascript:;",l.className="db-btn-download",l.innerHTML="Download";var m=function(a){a.preventDefault(),j.click(),DBSDK.$('.db-overlay[data-id="'+g+'"] iframe')[0].contentWindow.postMessage({action:"#db#designit#download"},"*")};DBSDK.unbindEventHandler(l,"click",m),DBSDK.bindEventHandler(l,"click",m),DBSDK.$('.db-frame-designit[data-id="'+g+'"] .db-designit-wrap')[0].appendChild(l),DBSDK.$('.db-overlay[data-id="'+g+'"] .db-close-lightbox')[0].click()}}else if("#db#design-button#getconfig"==c){var f=document.getElementsByName(d);if(f.length){var g=f[0].getAttribute("data-id"),h=DBSDK.$('img[data-db-uid="'+g+'"]')[0];if("undefined"!=typeof a.post_param&&"undefined"!=typeof a.post_param.custom){var n=a.post_param.custom;if("[object Array]"===Object.prototype.toString.call(n))for(var o=0;o<n.length;o++)f[0].hasAttribute("data-custom-"+n[o])&&(a.post_param[n[o]]=f[0].getAttribute("data-custom-"+n[o]))}var p=JSON.parse(JSON.stringify(a));"undefined"!=typeof p.post_callback&&delete p.post_callback,DBSDK.$('.db-overlay[data-id="'+g+'"] iframe')[0].contentWindow.postMessage({action:"#db#designit#config",config:p},"*")}}else if("#db#design-button#post-callback"==c){if("function"==typeof a.post_callback){var f=document.getElementsByName(d);if(f.length){var q=b.data.response||{},r=q.docId||null,s=q.docVersion||null,t=q.userId||null,g=f[0].getAttribute("data-id");a.post_callback(r,s,t),DBSDK.$('.db-overlay[data-id="'+g+'"] .db-close-lightbox')[0].click()}}}else if("#db#design-button#quit"==c){var f=document.getElementsByName(d);if(f.length){var g=f[0].getAttribute("data-id"),u=DBSDK.$('.db-overlay[data-id="'+g+'"]')[0];u.parentNode.removeChild(u)}}else if("#db#design-button#logout"==c){var v=b.data.href||"",f=document.getElementsByName(d);if(f.length){var g=f[0].getAttribute("data-id"),h=DBSDK.$('img[data-db-uid="'+g+'"]')[0],w=document.createElement("iframe");w.style.display="none",w.onload=function(a){document.body.removeChild(w)},w.src=v,document.body.appendChild(w);for(var x=DBSDK.$(".db-overlay"),y=0;y<x.length;y++)document.body.removeChild(x[y])}}else if("#db#design-button#getimagesize"==c){var v=b.data.href||"",f=document.getElementsByName(d);if(f.length){var g=f[0].getAttribute("data-id"),h=DBSDK.$('img[data-db-uid="'+g+'"]')[0];DBSDK.$('.db-overlay[data-id="'+g+'"] iframe')[0].contentWindow.postMessage({action:"#db#designit#imagesize",width:h.naturalWidth||h.offsetWidth,height:h.naturalHeight||h.offsetHeight},"*")}}};DBSDK.unbindEventHandler(window,"message",t,!1),DBSDK.bindEventHandler(window,"message",t,!1)},DBSDK.documentReady(function(){var a=window.DBSDK_Cfg||{};DBSDK.validateApp(function(){var b=document.createElement("link");b.rel="stylesheet",b.href="https://sdk.designbold.com/button/v1.0/css/designit.min.css",b.onload=function(){DBSDK.startSDK(a)},document.getElementsByTagName("head")[0].appendChild(b)})});